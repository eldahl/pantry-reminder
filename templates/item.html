<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details - Pantry Reminder</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <nav>
        <ul>
            <li><a href="/">Add Item</a></li>
            <li><a href="/list">All Items</a></li>
            <li><a href="/settings">Settings</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>{{.Name}}</h1>

        {{if .ImagePath}}
        <img src="/{{.ImagePath}}" alt="{{.Name}}" class="item-image">
        {{end}}

        <div class="details">
            <div class="label">Description:</div>
            <div class="value">{{.Description}}</div>

            <div class="label">Expiration Date:</div>
            <div class="value">{{.ExpirationDate.Format "2006-01-02"}}</div>

            <div class="label">Reminder Days:</div>
            <div class="value">{{.ReminderDays}} days before</div>
        </div>

        <div class="actions">
            <a href="/" class="back-link">&larr; Back to Add Item</a>
            <button id="deleteBtn" class="delete-btn">Delete Item</button>
        </div>
    </div>

    <dialog id="confirmDialog">
        <form method="dialog">
            <h3>Confirm Deletion</h3>
            <p>Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="dialog-actions">
                <button value="cancel">Cancel</button>
                <button id="confirmDelete" value="confirm" class="danger-btn">Confirm Delete</button>
            </div>
        </form>
    </dialog>

    <form id="deleteForm" action="/delete-item" method="POST" style="display:none;">
        <input type="hidden" name="id" value="{{.ID}}">
    </form>

    <script>
        const deleteBtn = document.getElementById('deleteBtn');
        const confirmDialog = document.getElementById('confirmDialog');
        const confirmDelete = document.getElementById('confirmDelete');
        const deleteForm = document.getElementById('deleteForm');

        deleteBtn.addEventListener('click', () => {
            confirmDialog.showModal();
        });

        confirmDelete.addEventListener('click', (e) => {
            e.preventDefault();
            deleteForm.submit();
        });
    </script>
</body>

</html>